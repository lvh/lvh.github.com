
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>lvh</title>
  <meta name="author" content="Laurens Van Houtven">

  
  <meta name="description" content="Hello again :-)I tweeted something. I&#39;m quite proud of it. It&#39;s exactly 140 characters, and it captures the essence of the last few days&#39 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.lvh.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="lvh" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
      });
</script>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-36779422-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>

  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.lvh.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  

<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/talks">Talks</a></li>
</ul>

</nav>
  <!-- <header role="banner"><hgroup>
  <h1><a href="/">lvh</a></h1>
  
    <h2>crypto & distributed systems</h2>
  
</hgroup>


</header> -->
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/09/reflections-on-stories-from-disgruntled-launchpad-users/">Reflections on Stories From (Disgruntled) Launchpad Users</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-09T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">Hello again :-)<p /><br />I tweeted something. I&#39;m quite proud of it. It&#39;s exactly 140 characters, and it captures the essence of the last few days&#39; worth of articles quite well. Obviously it makes concessions to accuracy for reasons of brevity, but here goes anyway:<p /> <div style="margin-left: 40px;">It seems to me Github people use Github as a coping mechanism for git, and Launchpad people use Bazaar and a coping mechanism for Launchpad.</div><br />That explains virtually all of the feedback and workflow I&#39;ve received. It seems Github users use git as a tool to get code into Github as quickly as possible, so magic and sprinkles can be added to it. That means the Github people have done an excellent job. It&#39;s managed to create an environment where you have awesome features like truly polished pull requests and a great code browser that lets you peek into someone else&#39;s repository without you having to worry about adding a remote, fetching objects, removing a remote&#8230;<p /> Github tries to minimize your exposure to git &#8211; <a href="http://chriswanstrath.com/hub/">hub</a> even more so (with hub, clones and pulls look like they do with bzr for me. Huge win.). Even without having to call git&#39;s UX bad, that makes (business) sense: the Github people aren&#39;t the git people so they want you in their service as much as possible. And man, have they succeeded.<p /> On the other side of that argument, there&#39;s Launchpad and Bazaar. Most of the discussions about Launchpad&#39;s UI warts (and, keeping in mind my last article, some of them are just a question of catering to a different audience but some of them really are simply faults) go something like this:<br /> <div style="margin-left: 40px;"><b>unhappy user:</b> Hey lvh, take a look at $BOGUS_UI_CHOICE. Come on, you have to admit, that just sucks.<br /><b>lvh</b>: Huh. You&#39;re right &#8211; that is pretty bad. I just never noticed because I use $BZR_INVOCATION to get to that information.<br /> </div><br />Case in point: merge proposals. Apparently they had an in-page diff. I had no idea.<p />Github users use Github to do things. Launchpad users use Launchpad as branch storage + metadata (bug tracker, merge proposals, primarily) so they can convince bzr to do things. When Github users go to Launchpad, perhaps without truly trying to use it, they see the prospect of using something like Github but worse. When Launchpad users go to Github, they see the prospect of getting to use git for everything instead of bzr. (And, let&#39;s be honest &#8211; if you&#39;re diffing between remotes all day, Github is more pleasant than plain git, and bzr is too.)<p /> cheers<div>lvh</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/08/on-sysadmins-programmers-and-reconciliation-a-response-to-zed-shaw-s-post-/">On Sysadmins, Programmers, and Reconciliation (a Response to Zed Shaw&#8217;s Post)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-08T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">Zed Shaw posted <a href="http://sheddingbikes.com/posts/1299555462.html">a response</a> to <a href="http://b.lvh.cc/why-do-people-hate-launchpad-so-much">my article on why people hate Launchpad</a>. Apart from causing the number of readers to skyrocket by an order of magnitude, it&#39;s given me some new perspective on the problem. As always, I love feedback, especially if people agree with things I say ;-)<p /> Assuming Zed&#39;s right (and I think he&#39;s at the very least got a point), <a href="http://b.lvh.cc/a-compiled-list-of-launchpads-perceived-flaws">my previous list of grievances</a> splits up into two things:<br /> <ol> <li>Things that make Launchpad more like Github. In Zed&#39;s terminology, make Launchpad less of a sysadmin place and more of a programmer place. Following Zed&#39;s conclusion, these are bad changes.<br /></li><li>Things that make everyone&#39;s life easier and aren&#39;t necessarily about one group versus the other. As the contrapositive to Zed&#39;s conclusion, they are good changes.<br /> </li></ol>Now, I think at least some of the UI changes from that list are in that last group. Particularly the code browser UI issues (and they are legion &#8211; Loggerhead is on occasion hard to like) are something I don&#39;t really see how anyone could object to. Concrete examples are:<br /> <ul><li>Renaming &quot;View branch content&quot; to &quot;View code&quot;. &quot;Code&quot; is a word programmers scan for. To quote Zed&#39;s article: code, code, code. Contrary to popular belief you can actually access trunk&#39;s code with a single click from the project&#39;s front page! It&#39;s just cleverly hidden.<br /> </li><li>Merging the branch and branch content pages, embedding Loggerhead in the page like Github&#39;s file browser, instead of making it a separate page. Sysadminny types probably wouldn&#39;t ever have looked at that page in the first place.</li> <li>Removing dead project features (like translations, blueprints, answers) for J. Random User</li></ul>There are, of course, also ideas that would piss off the syadminny group, like moving series around or putting a Github style code browser on the overview page. (Probably explains why I dislike that last feature.)<p /> But yeah: if you fixed every single point in that list of perceived flaws, my in-brain mockup of what Launchpad 2.0 would look like would still decidedly be Launchpad and not Github: which is probably what Zed is talking about. And, like he said, that doesn&#39;t actually have to be problem.<p /> I agree that both Github and Launchpad would be very hard-pressed to transform into something everyone likes, but the &quot;why&quot; of that wasn&#39;t quite clear enough in my head yet for me to write a blog post about it (my posts are bad enough when I&#39;m convinced I do know what I want to say). Zed&#39;s article helped quite a bit there.<p /> The difference is I have no idea what this third system that caters to both in the same place would look like yet. Zed probably has a better idea of what he&#39;s talking about than I do.<p />My idea is different. It&#39;s probably a bit worse, since you&#39;d have N places where code live instead of 1, but at least in the short run it seems like less effort to end up with a working thing. The idea goes like this: if Github and Launchpad are really different beasts catering to different beasts, maybe we shouldn&#39;t try to make them be the same, and instead let them cooperate. This is why I think (well, hope) the idea of <a href="http://b.lvh.cc/bridging-the-gap-between-launchpad-and-github">bridging Launchpad and Github</a> &#8211; having them play nicely together in the same sandbox instead of the current situation we&#39;re they&#39;re direct competitors &#8211; may have some value to it.<p /> I&#39;d really like some feedback on Github fans on that. I <i>know</i> Launchpad people are going to like it since they can pretty much just use Launchpad and don&#39;t have to care Github exists. I&#39;m hoping people don&#39;t find Launchpad so revolting that using its bug tracker and merge proposals (as cited in that article I linked, features at least as good on Launchpad as on Github) becomes a contribution blocker.<p /> cheers<br />lvh
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/06/bridging-the-gap-between-launchpad-and-github/">Bridging the Gap Between Launchpad and Github</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-06T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">Hey.<p /><br />Ever the diplomat, I&#39;ve been trying to figure out a way to use Launchpad yet keeping the people that dislike it happy.<p />It is based on two premises. If you disagree with them, you may as well stop reading now. (or, even better: tell me why)<br /> <ul><li>Launchpad&#39;s bug tracker is preferable, or at least equal, to Github Issues.</li><li>Launchpad&#39;s merge proposals are identical to Github Pull Request 2.0&#39;s, with the exception of bug tracker integration.</li> </ul>First of all, the project uses Launchpad as a bug tracker, and Launchpad merge proposals as the mandatory code review for getting code into trunk. Launchpad trunk is constantly mirrored into a Github repository.<p />  Launchpad users that want to develop the project pretend Github doesn&#39;t exist.<p />Github users that want to develop the project pretend Launchpad doesn&#39;t exist. They just fork the repository and make some changes, as they normally would. Once they want to get some code into trunk, they file a pull request, which is where the magic starts.<p /> A bot creates an alternative merge proposal equivalent to the pull request. There are two options for doing that:<br /><ul><li>Grabbing the pull request diff</li><li>Using bzr-git to import the branch into git</li></ul> (The latter is preferable because it preserves commit structure. The former is probably easier to implement and less hairy to implement/maintain due to impedance mismatches.)<p />Either way, a new branch is created with the same name as the Github branch. Ideally, the merge proposal is linked to the appropriate bug. That means the branch should contain information about the bug it relates to (possibly in the name, eg 54321-fixQuantumTransmogrifier), since, as far as I know, git has no equivalent to bzr commit&#39;s &#8211;fixes. The pull request gets a link to the merge proposal. All review-related work happens in Launchpad, not Github. Based on the second premise, this is acceptable.<p /> The obvious problem here is that Github users can&#39;t really monitor what&#39;s going on in terms of development in Launchpadland and vice-versa. A solution may be to push more branches, but I dislike doing that. Perhaps using their respective APIs, the data can be syndicated into a common source. Ideas welcome.<p /> cheers<div>lvh</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/06/a-compiled-list-of-launchpad-s-perceived-flaws/">A Compiled List of Launchpad&#8217;s Perceived Flaws</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-06T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>(Note: just because I say &#8220;perceived&#8221; flaws doesn&#8217;t mean I don&#8217;t agree they are. It&#8217;s just a way to encourage feedback from people who disagree.)<p />I&#8217;ve compiled the responses I&#8217;ve received so far to <a href="http://b.lvh.cc/why-do-people-hate-launchpad-so-much" target="_blank">my previous article about Launchpad</a>. This is intended as constructive criticism and hopefully stuff that can be used to build a better Launchpad.<p /> I&#8217;d like to thank everyone who bothered to have a <a href="http://b.lvh.cc/religious-wars-considered-harmful-considered">sensible, adult discussion</a> about Launchpad with me. I very much appreciate your feedback, even the rants. The Launchpad people are also expressed interest in this previously unreceived feedback (which makes sense, I guess). There certainly were a lot of you! If it ends up making Launchpad a nicer place for everyone maybe it&#8217;s worth the time it took, though.<p /> The vast majority of complaints I&#8217;ve seen are about Launchpad&#8217;s interface.&nbsp; People perceive the Launchpad interface as hard to use and anything but obvious. They particularly feel there&#8217;s just too much noise, making useful features hard to find.<p /> I tried to distill stuff that smells like it&#8217;s easy to fix to me. It didn&#8217;t always work, of course. Some problems (primarily about Loggerhead) require non-trivial amounts of work.<p />Here are some concrete examples:</p>
<ol>
<li>As a user, I don&#8217;t care that a project doesn&#8217;t use Launchpad for translations, but it takes up the spot of a primary feature in the main menu and the Get Involved box. It should only be shown to the Maintainer (a single user or a group). This also counts for&nbsp; Blueprints and Answers, except it&#8217;s less obvious what they mean to people, apparently. Most projects really only need Overview, Code and Bugs (in fact, Github and Bitbucket do away with the entire Overview tab, too &#8211; but that&#8217;s not universally seen as a requirement for a usable thing).</li>
<li>Latest reported bugs, latest questions and the FAQ box on the landing page are considered unnecessary noise: it&#8217;s duplicated on the respective specific pages, and the people who actually need that kind of notification probably should get e-mails anyway.</li>
<li>Announcements on the other hand are a far more important feature, but they&#8217;re tucked away: on the Bazaar&#8217;s Launchpad Overview page, I have to scroll down to find it. Perhaps they should have a more prominent position on the page.</li>
<li>Downloads are important enough that they probably warrant a separate page. The Overview page&#8217;s Packages in Distributions pages can be moved there, too, further decluttering the Overview page.</li>
<li>A lot of people don&#8217;t understand Blueprints or consider it a misfeature. Fixing the first point would obviously alleviate that since it&#8217;d be opt-in.</li>
<li>As a user, I can&#8217;t figure out how to browse the code. &#8220;View branch content&#8221; ought to be called &#8220;View code&#8221;, or something &#8211; it makes sense to a Bazaar/Launchpad user but not to J. Random Contributor.</li>
<li>People really like Github&#8217;s Readme Driven Development. Perhaps the overview could be grabbed from the development focus&#8217; README file? Admittedly some README&#8217;s may be too large for this to work well with the current landing page.</li>
<li>Subscribe to bug mail is a primary feature on the project landing page, even above the Get Involved box. This doesn&#8217;t make sense: that&#8217;s a Bugs specific feature, and the Bugs page has an identical feature already. It could just be removed without loss of functionality.</li>
<li>Series and milestones are a code feature: I don&#8217;t particularly care about them on the overview page, and they would probably be better off on the code page. Preferably after the branches or at least foldable, since it does take up quite a bit of screen real estate. In order to parse it and turn it into useful information, you probably need to be more than a little involved in the project already. The idea is that not sufficiently many users care to warrant such a prominent place on the landing page.</li>
<li>Loggerhead&#8217;s date format is hard to parse. Github and Bitbucket use relative, human-readable timedeltas, except for dates sufficiently far away (where they use a plain date). You could still make the real date accessable on mouseover if people wnat that feature.</li>
<li>Loggerhead is very poorly integrated with the rest of Launchpad: it feels like a tacked on feature. Compare to Github and Bitbucket where code viewing is an integral part of the user experience.</li>
<li>Somewhat conjoined with the previous point: there&#8217;s a separate page for a branch and the branch content and that confuses people. Perhaps they could be integrated without overloading branch pages. (One particularly important feature is merge proposals, but they&#8217;re accessible from the Code page).</li>
<li>People are unhappy with the lack of progress on Loggerhead. I feel kind of bad about this point since it makes me sound like I&#8217;m calling people lazy bums, but journalistic integrity demands I report it. I had <a href="https://bugs.launchpad.net/loggerhead/+bug/569358%20">quite</a> <a href="https://bugs.launchpad.net/loggerhead/+bug/569355">a few</a> bugs listed as examples. I don&#8217;t know if these are unique or illustrations of a more general problem.</li>
<li>Although merge proposals are used for code review, people are confused by the Code page saying &#8220;code review&#8221; when it means &#8220;merge proposals&#8221;. It would be nice if everything said merge proposals. Or is the point here that Launchpad might integrate with other code review tools?</li>
<li>Some people can&#8217;t use the e-mail interface <a href="https://bugs.launchpad.net/bugs/643224">because the DKIM whitelist is hardcoded</a>.</li>
</ol>
<p><br />To be continued.<p />cheers<br />lvh</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/05/why-do-people-hate-launchpad-so-much-/">Why Do People Hate Launchpad So Much?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-05T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">Following a discussing on Convore recently, I noticed some people (names withheld to protect the guilty &#8211; I&#39;m sure they will speak up if they feel like it) strongly dislike Launchpad. Apparently they dislike it so much they would rather use a different project if they find something that uses it.<p /> I don&#39;t get it.<p />First off, lI&#39;m not trying to make this a git vs hg vs bzr vs whatever discussion, except perhaps to the extent that those tools shape their respective hosting system. Not that I think those discussions have to devolve into religious wars (<a href="http://b.lvh.cc/religious-wars-considered-harmful-considered">a subject on which I have blogged recently</a>), it&#39;s just that I&#39;d like to limit the scope so we end with a bunch of things that can actually be improved.<p /> My main problem with <a href="https://github.com/">the 500lb gorilla in the room</a> is its issue tracker. I know, it&#39;s a simple feature tacked on later, and all in all the ability to link to branches and revisions and to be able to close tickets from commit messages ain&#39;t so bad.<p /> One particular unfortunate choice is that they decided to make pull requests issue tracker artifacts. I&#39;m convinced it should be an attachment to one, instead. Pull requests are about merging code. There must be a reason to do that &#8211; that reason is a ticket. That means if you use pull requests as a mechanism for code review (which they seem to be marketed as), ergo having all code be added using them, all changes to trunk have at least two issue tracker artifacts: the ticket describing the change, and the pull request carrying the code that does it. I think that&#39;s a bit silly. Pull requests hence often become somewhat of a ticket in their own right, which works well for one-time contributions which are typically limited in scope, but it seems this results in an inconsistent workflow which is a bit more annoying for things that actually do require a ticket.<p /> Launchpad&#39;s issue tracker, on the other hand, is one I particularly like.<p />It&#39;s unique in the sense that it lets you track the state of bugs in different parts of downstream. Additionally, bugs aren&#39;t unique to a project &#8211; allowing people from different groups to collaborate on the same issue. It lets me assign bugs to a person: a feature I sorely miss in Github. The equivalent of Github Issue&#39;s voting feature is just a &quot;this affects me&quot; link: similar to Google Code&#39;s starring idea. The goal is always the same: measure the importance of a bug without getting the noise of a million &quot;me, too&quot; messages. (Github and Launchpad&#39;s way of doing it seems more effective, though.)<p /> Launchpad&#39;s alternative to pull requests, called merge proposals, are quite similar to Github&#39;s pull requests 2.0. The main difference is the bug tracker interaction: like I&#39;ve described above, they <i>attach</i> to issues, instead of being them themselves.<p /> A complain I often hear yet don&#39;t quite grok is the apparent difficulty of getting to code. Personally, I don&#39;t quite see the problem. The main branch (lp:projectname) and its contents are one click away from the front page. All of the branches of a project (from everyone! not just the project leads), are visible with a single click from the project front page, under the &quot;Code&quot; menu. I must admit I rarely use that web UI: instead, I just bzr co lp:projectname if I want to take a look.<p /> The contributor story is also fairly pleasant, in my opinion. I don&#39;t even need to fork anything (at least not explicitly): just get the branch, make some changes, push them to lp:~lvh/projectname/mybranch and done. That magic syntax isn&#39;t Launchpad-specific: that&#39;s called <a href="https://code.launchpad.net/bzr-bookmarks">a bookmark</a>, and you can just as well have your own if you don&#39;t use Launchpad.<p /> So what exactly is the problem? I&#39;m planning on moving a project from Fossil to something else at Pycon &#8211; but if everyone hates it so much, I&#39;m willing to reconsider. For example: I&#39;d use Github if I can find a useful issue tracker to go with it. I&#39;d use bitbucket if there&#39;s some reasonable way to have in-repo pull requests (like Github pull requests 2.0 or Launchpad merge proposals).
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/03/05/religious-wars-considered-harmful-considered-harmful/">Religious Wars Considered Harmful Considered Harmful</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-03-05T00:00:00+01:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">Hey.<p /><br />Can we stop avoiding subjects because we&#39;ve elevated them to the state of personal opinion? Especially since &quot;personal opinion&quot; usually ends up meaning &quot;dogma&quot;, and is quite often used as an excuse to cover up ignorance.<p /> The usual suspects here are of course:<br /><ul><li>vim versus emacs versus whatever</li><li>git versus mercurial versus bazaar versus whatever</li><li>twisted versus gevent versus eventlet versus tornado versus whatever</li> <li>django versus pyramid versus web2py versus web.py versus cherrypy versus whatever<br /></li></ul>Here&#39;s why. Not every discussion about them has to devolve into a full-blown flame war. Yes, there are trolls. Yes, there are clueless fan-boys who&#39;ve drunk one glass too many of the delicious Kool-Aid. We have those pretty much everywhere else, too, though: and we just ignore them. But we&#39;re not trolls &#8211; we&#39;re reasonable adults with different favorite tools. Perhaps that&#39;s based on extensive experience. Perhaps it isn&#39;t. Perhaps it&#39;s based on stuff that&#39;s not even true anymore. Can&#39;t we talk about them as one reasonable adult to another? Preferably without resulting in name calling and blatant demagogy.<p /> Dismissing discussions a priori effectively means you&#39;ve decided, up front, that they&#39;re going to have a net negative outcome. At best, that&#39;s insulting to the people you&#39;d be discussing with. At worst, it&#39;s a monumental display of arrogance, since you&#39;ve just decided that there is nothing that can be learned from people who have done things differently.<p /> I&#39;m not talking about people who mindlessly promote their favorite version control system or editor or library, without having given the alternatives the light of day. They&#39;re annoying in their own right, but they&#39;re nothing compared to the people who then proceed to trash-talk the alternatives without having any real arguments. Like something someone smarter than myself said: <a href="https://twitter.com/#%21/jacobian/status/18369419788951552">&quot;if you promote your project by dissing the competition, I&#39;ll assume that your project sucks or you&#39;re a dick. Either way I won&#39;t use it.&quot;</a> &#8211; except it&#39;s not even their project.<p /> If you don&#39;t know what a mark ring or a kill ring is, any disparaging comment you make about Emacs is probably worth a troll stamp, sorry. If you haven&#39;t used anything but git, I&#39;m not particularly interested that you think everything that isn&#39;t git is dumb. If you didn&#39;t manage to get through the finger tutorial and you&#39;ve never used any of the alternatives either, I don&#39;t really care if you think Twisted is complicated. Quite frankly, you don&#39;t know what you&#39;re talking about. Your braindead statements don&#39;t contribute to anything but my blood pressure.<p /> I&#39;ve tried to have sensible discussions countless times, and when I succeeded, it ended up being perfectly civil <i>and</i> showing someone how maybe not everything the enemy is doing is so bad. Perhaps they have ideas worth stealing. Perhaps we can stop worrying about what separates us, silence the trolls like we do everywhere else, and focus on what we have in common.<p /> cheers<br />lvh
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/13/pycon-us-talk/">Pycon US Talk</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-13T00:00:00+02:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">Finances permitting, I will attend Pycon US 2011. I will also try to give a talk about most of the meat and potatoes on this blog.<p /><div>What do you think should be included? What do you think shouldn&#39;t be?</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/04/cautious-deployment-for-continuous-availability/">Cautious Deployment for Continuous Availability</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-04T00:00:00+02:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><div>In <a href="http://lvh.posterous.com/designing-a-continuous-deployment-system-caut">my last post</a>, I talked about cautious deployment as a technique for recovering from botched deployments. Cautious deployment&nbsp;also solves a second problem by helping you get continuous availability.</div>
<p />
<div>In the article about cautious deployment, I had the following graph for hypothetical, optimistic deployment:</div>
<div>[[posterous-content:L2vALkn09tFOvqjIkPGw]]</div>
<p />
<div>Obviously, that&#8217;s a bit simplistic. It would be correct, if all your servers decide to restart the service in a perfectly synchronized fashion, and all of your servers manage do that operation in precisely identical amounts of time, and no interdependencies between your services.</div>
<p />
<div>Typically: none of those things are true. starting services is a stochastic process and you really don&#8217;t quite know how long it&#8217;ll take. Stuff depends on each other all the time. Hence, the graph is more likely to look something like this:</div>
<p />
<div>[[posterous-content:67uOLIMpCLyTivUYZ5MS]]</div>
<div>Of course, it&#8217;s occasionally way worse than this. Your users generally don&#8217;t know nor care that you&#8217;re upgrading, so those few early starters get to deal with a disproportionately high load. That could happen up to the point where watchdogs mistakenly believe the process has just crashed. That watchdog then orders for that process to be restarted, which of course only makes it worse for all of the other processes still up.</div>
<p />
<div>(If you&#8217;re thinking &#8220;Oh come on. It&#8217;s nowhere near that bad&#8221; &#8211; how do you know? Did you measure that? For some people, it definitely is.)</div>
<p />
<div>This problem is often overlooked, because there&#8217;s tons of ways of missing it completely (mostly because&nbsp;statistics is hard).</div>
<div><ol>
<li>Not even bothering to analyze (unfortunately the most common)</li>
<li>Not recognizing the worst case</li>
<li>Normal distribution not being a good fit</li>
<li>Failure to recognize the weakest link</li>
</ol></div>
<div>Unfortunately, most of the people fall in group one. Come on guys, we can all do better than this. If there&#8217;s two recurring patterns in modern (I hate to use the word, but&#8230;) agile businesses, that comes back across the board it&#8217;s &#8220;measure&#8221; and &#8220;iterate&#8221;. Even rudimentary tests are better than flying blind.</div>
<p />
<div>Number two, failure to recognize the worst case, generally happens when people do some kind of basic analysis. That generally amounts to taking a bunch of values and then computing the mean/median and working from there. Not recognizing the worst case is really a special case of not really assessing the distribution of your values correctly.</div>
<p />
<div>A mean is pretty interesting by itself, but you can&#8217;t get too much useful information out of it completely by itself. Knowing a service starts within a second on average is pretty useless when it has a standard deviation of a minute. (If that&#8217;s the case, descriptive statistics just showed you that your data probably doesn&#8217;t fit a normal distribution very well: the lower limit for physically possible events is at Z=-1<span style="font-family: sans-serif; font-size: 13px; line-height: 19px;">/60, unless your servers start up in negative amounts of time&#8230;</span>)</div>
<p />
<div>First of all, that service might have things that are waiting on it to get started. This is the weakest link argument: your slowest step just became a defining factor for the performance of the entire process.&nbsp;Secondly, people perceive jittery things worse than consistent things, all other things being equal. Imagine if Google loaded a lot faster often (would you even really notice?) but about as often as it would load faster, it would take five seconds.</div>
<p />
<div>Even when you have people who do some pretty reasonable statistical analysis on individual parts, that becomes only half the story in a distributed system. Even with measurements from real deployments, it&#8217;s extremely hard to predict how these things will behave.</div>
<p />
<div>Bottom line? Statistics is hard, and it&#8217;s easy to get fooled into thinking you&#8217;ve got it right even when you&#8217;re miles off (I&#8217;ve been bitten by this myself, more than once). Once you&#8217;ve done that, set up a sandboxed miniature model for your entire (distributed) system, and check the assumptions from your statistics against it. After that, you&#8217;re only likely to miss scale issues.&nbsp;</div>
<p />
<div>Even when you take all of that into account, you will get things wrong. That was my original point about cautious deployment: as long as you have that and it works, you&#8217;re allowed to get it wrong once in a while. Fail gracefully. It&#8217;s not so scary to leap the chasm when there&#8217;s a net to catch you.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/01/designing-a-continuous-deployment-system-cautious-deployment/">Designing a Continuous Deployment System: Cautious Deployment</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-01T00:00:00+02:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content">This article will be about a deployment scheduling technique which I call operationally cautious deployment. (I didn&#39;t pick the name so the acronym would end up being OCD! Honest! I swear!).<p /><div>Note: This isn&#39;t <i>new</i>. I didn&#39;t invent it. The fact that a big number of people around the globe with similar problems have come up with this idea independently and that most of them are happy with the results speaks for itself: this is mostly just common sense thinking applied to fixing a real problem. It&#39;s one of those things that sound obvious when you have them explained to you, but you probably wouldn&#39;t come up with unless you spend quiet a bit of time pondering the problem.</div> <p /><div>So you have a wonderful continuous deployment system! Congratulations! You deploy a new version, monitor your cluster of hosts, and create wonderful graphs:</div><p /><div>[[posterous-content:NBFS9fiUjfTCi8Xr5KIW]]<br /> </div><p /><div>Except, of course, it&#39;s not that simple. Your test suite, no matter how much you&#39;ve honed and polished it, is imperfect. It will contain subtle assumptions that just aren&#39;t true in deployment. (When I say &quot;subtle assumptions&quot;, I mean the kind that you don&#39;t know are assumptions until everything blows up.). If you&#39;re going to be deploying software all the time, deploying something that has a fatal mistake in it is a matter of when, not if. So one day, the real graph is going to look something like this:</div> <p /><div>[[posterous-content:5k8ymL4PxLDrYfbFgL8h]]<br /></div><div>It would be much nicer if we could deploy more cautiously. Try it out, and only go through with the complete deployment. A sort of live test, deploying with a feedback loop. That might look a bit like this:</div> <p /><div>[[posterous-content:apvQ27GHbg2rEh2CWgEa]]</div><div>That deploys the new version to 2**N servers, with N starting at 0 and increasing until all servers use the target version. The number of servers deployed to is exponential, because that gives us the behavior we wanted: slow and cautious at first, and rapid as soon as we think it&#39;ll work.</div> <p /><div><div>Of course, that doesn&#39;t give you an example of a failure mode. Failures look a bit like this:</div><div>[[posterous-content:tibBqAUzF8OCiIOWmnDZ]]</div> </div><div>Just like in the previous picture, a roll-out of a new version starts. Except this time, the new version doesn&#39;t actually work. The system catches this, and reverts the hosts that have already converted.</div> <p /><div>Of course, the package is still broken! You didn&#39;t fix the problem yet, you just reduced its impact. Your dev room should still look roughly like an control room from a bad Cold War movie right after the other party&#39;s launched a bunch of nukes.</div> <p /><div>It&#39;s just another bug, albeit a particularly nasty show-stopping one. Like all bugs, they&#39;re not so much bugs in the software as they are bugs in the test suite that incorrectly specified the requirements for the software. This becomes painfully obvious here: there&#39;s something broken, but your test suite didn&#39;t catch it. Hopefully, it&#39;s something that&#39;s at all testable.</div> <p /><div>The difference between this state of panic and the original state of panic is that, ideally, your users never noticed there was a problem.</div><p /><div>There&#39;s one obvious problem with all of this. Being able to continue deployment on positive feedback and revert deployments on negative feedback relies on actually having feedback. Useful health metrics for a cluster are halfway between art and science, and are definitely outside of the scope of this article.</div> <p /><div>The next article will be about another benefit of cautious deployment: continuous <i>availability</i>. That one is probably going to be halfway between an article about continuous deployment and a rant about how people need to learn more statistics.</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/09/30/designing-a-continuous-deployment-system-deployment-formats-and-content/">Designing a Continuous Deployment System: Deployment Formats and Content</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-09-30T00:00:00+02:00" pubdate data-updated="true"></time>
        
      </p>
    
  </header>


  <div class="entry-content"><div>Hi and welcome again to my articles on continuous deployment! In this article, I&#39;m going to talk about <i>what</i> exactly I think you should deploy and what format you should use to deploy it in.</div><p /> <div>Again, the stuff here probably isn&#39;t super controversial. I&#39;m probably not kicking any shins in this one unless you&#39;ve already done continuous deployment and you picked something else. Analogous with the last article, if you don&#39;t really care about deployment formats, save yourself the time and don&#39;t bother reading.</div> <p /><div>When getting in touch with a few people I know are doing continuous deployment, there are a number of things I&#39;ve heard people say about formats and what exactly to deploy. Here&#39;s what they used:</div> <div><ol><li>Distribution packages (debs, rpms&#8230;)</li><li>Language&#39;s native packages (eggs, gems, &#8230;)</li><li>The development environment</li><li>The test environment</li></ol></div><div>(Although it appears that this list confounds two things (formats and content); that&#39;s not entirely true. These packages are generated using standard practice packaging rules with standard content, almost as if they were part of a distribution/PyPI/Rubyforge&#8230;)</div> <p /><div>Some people have reported success deploying native packages. It definitely has it&#39;s advantages in terms of accounting, plus you get to use all of the tools already available for managing package installation on large networks. (As a practical example: PPAs and apt repositories in general, together with Landscape or other tools for managing updates for Ubuntu servers.) Hence, the choice for native packages is understandable: in big existing companies, using existing infrastructure is a big plus.</div> <p /><div>When greenfielding, however, I would prefer to avoid both distribution packages and native packages. One problem is that pretty much all of these are designed for system-wide installations. There are methods of getting around this, such as Python&#39;s virtualenvs, but that makes the system specific to a particular language and set of deployment tools, and I&#39;ve already argued in a previous post why I&#39;d rather avoid that unless there really is no better option.<span style="font-family: arial, helvetica, sans-serif;"> Since nowhere near every reasonable development platform has such a sandboxing tool, it&#39;s not possible to form an abstraction over it.</span></div> <p /><div>A related problem is that it&#39;s generally impossible to reliably install multiple versions of these concurrently in a widely supported way (again,with the exception of language-specific tricks like virtualenvs). That&#39;s not necessarily a huge problem, but it does make reverting to an older version slightly harder. That might not seem like a big deal, but easy reverts are a big part of cautious deployment (more about that in the next installment). Additionally, there&#39;s nothing to prevent a bad/broken package from having side effects that break older installs as well &#8211; as usual, shared mutable state is asking for trouble.</div> <p /><div>Another thing I&#39;ve seen people package is their development environment. Unless you&#39;re also using this as the base for your tests, I think this is a very bad idea. I think we&#39;ve all had cases where something worked fine on a development box, and started breaking for new checkouts. During development, all sorts of stuff Some languages/development environments are more susceptible to these problems than others, but they&#39;re prevalent enough to want to avoid the problem altogether.</div> <p /><div>Even if you are testing your development environment, I dislike it for purity reasons. The people doing this said they did that because it was the easiest way to get stuff running, and they just went along with the path of least resistance. As much as I&#39;m willing to believe that&#39;s true, I also believe that if you need a developer to chant some magic runes and sacrifice a chicken over a checkout of your code before it&#39;ll actually work, you&#39;re doing it wrong.</div> <p />I think repackaging test environments for deployment is a sensible idea. I talked this over with Holger Krekel, the guy who wrote <a href="http://codespeak.net/tox/" target="_blank">Tox</a>, and he immediately pointed out a flaw in that plan: it&#39;ll only work reliably if the testing environment is identical to the deployment environment in terms of platform, architecture, versions of available software&#8230; I thought this was a limitation at first, but I&#39;m now convinced this is a useful limitation (another idea I stole from Holger ;)). If you didn&#39;t <i>test</i> it in environment X, what business do you have <i>deploying</i> it there? <p /><div>I think I&#39;ve got most of the annoying administrative stuff out of the way now, maybe we can move on to more interesting things that are actually specific to continuous deployment :-) That starts with the next article, which, as I&#39;ve already hinted above, will be about &quot;cautious deployment&quot;, a robust technique for scheduling deployment.</div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/"><i class="fa fa-chevron-circle-left fa-2x icon-color"></i></a>
    
    
    <a class="next" href="/blog/"><i class="fa fa-chevron-circle-right fa-2x icon-color icon-homepage"></i></a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section>
  <h1>Latest Tweets</h1>
  <a class="twitter-timeline"  href="https://twitter.com/lvh"  data-widget-id="451753700516585472">Tweets by @lvh</a>
    <script>!function(d,s,id){var
      js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>

<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/03/18/optimal-hotel-room-pairing/">Optimal Hotel Room Pairing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/10/optimization-problems-and-pycon-financial-aid/">Optimization Problems and PyCon Financial Aid</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/18/external-drive-lossage-on-mavericks/">External Drive Lossage on Mavericks</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/11/15/using-protractor-with-angularjs-and-yeoman/">Using Protractor With AngularJS and Yeoman</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/10/19/thoughts-on-rdrand-in-linux/">Thoughts on RDRAND in Linux</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/lvh">@lvh</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'lvh',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


  
</aside>

    </div>
  </div>
  <!-- <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Laurens Van Houtven -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>



</footer> -->
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
